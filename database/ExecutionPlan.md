# Execute Plan

ì‹¤í–‰ ê³„íšì´ë€ ë§ ê·¸ëŒ€ë¡œ SQL ë¬¸ìœ¼ë¡œ ìš”ì²­í•œ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ë¶ˆëŸ¬ì˜¬ ê²ƒì¸ì§€ì— ê´€í•œ ê³„íš, ì¦‰ ê²½ë¡œë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì§€ë¦„ê¸¸ì„ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì°¾ì•„ë‚¼ ê²ƒì¸ì§€, ì§€ë¦„ê¸¸ì´ ìˆì–´ë„ ë©€ë¦¬ ëŒì•„ê°€ì„œ ì°¾ì„ ê²ƒì¸ì§€ ë¯¸ë¦¬ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì‹¤í–‰ ê³„íšì„ í™•ì¸í•˜ëŠ” í‚¤ì›Œë“œë¡œëŠ” EXPLAIN, DESCRIBE, DESC ê°€ ìˆê³ , ê²°ê³¼ëŠ” ëª¨ë‘ ê°™ìŠµë‹ˆë‹¤.

<br/><br/>

### MySQL

```java
mysql> explain select * from test;
+----+-------------+-------+------------+------+---------------+------+---------+------+--------+----------+-------+
| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows   | filtered | Extra |
+----+-------------+-------+------------+------+---------------+------+---------+------+--------+----------+-------+
|  1 | SIMPLE      | test  | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 102112 |   100.00 | NULL  |
+----+-------------+-------+------------+------+---------------+------+---------+------+--------+----------+-------+
1 row in set, 1 warning (0.01 sec)
```

<br/>

mariaDBëŠ” partitions, filteredê°€ ì—†ìŒ

<br/>

## í…ŒìŠ¤íŠ¸

[ğŸ”—Â ì†ŒìŠ¤Â ë§í¬](https://dev.mysql.com/doc/index-other.html)

<img src="./img/erd.png" alt="ERD" width="40%" />

<br/><br/>

## ê¸°ë³¸ ì‹¤í–‰ ê³„íš í•­ëª© ë¶„ì„

<br/>

## ğŸ“ŒÂ id

*ì‹¤í–‰ ìˆœì„œ*

<br/>

SQL ë¬¸ì´ ìˆ˜í–‰ë˜ëŠ” ì°¨ë¡€ë¥¼ IDë¡œ í‘œê¸°í•œ ê²ƒ. 

ì¡°ì¸ ì‹œ ë™ì¼í•œ IDê°€ í‘œì‹œë¨

ì¦‰, IDê°€ ì‘ì„ìˆ˜ë¡ ë¨¼ì € ìˆ˜í–‰ëœ ê²ƒì´ê³ , IDê°€ ê°™ìœ¼ë©´ ì¡°ì¸ë˜ì—ˆë‹¤ëŠ” ì˜ë¯¸

<br/>

- example code
    
    ```sql
    mysql> EXPLAIN SELECT e.emp_no as ì‚¬ë²ˆ, e.first_name as ì´ë¦„, e.gender as ì„±ë³„, s.salary,
        -> (SELECT MAX(dept_no) as ë§¤í•‘ FROM dept_emp WHERE dept_emp.emp_no = e.emp_no)
        -> FROM employees e, salaries s
        -> WHERE e.emp_no = s.emp_no AND e.emp_no = 10001;
    +----+--------------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+------------------------------+
    | id | select_type        | table | partitions | type  | possible_keys | key     | key_len | ref   | rows | filtered | Extra                        |
    +----+--------------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+------------------------------+
    |  1 | PRIMARY            | e     | NULL       | const | PRIMARY       | PRIMARY | 4       | const |    1 |   100.00 | NULL                         |
    |  1 | PRIMARY            | s     | NULL       | ref   | PRIMARY       | PRIMARY | 4       | const |   17 |   100.00 | NULL                         |
    |  2 | DEPENDENT SUBQUERY | NULL  | NULL       | NULL  | NULL          | NULL    | NULL    | NULL  | NULL |     NULL | Select tables optimized away |
    +----+--------------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+------------------------------+
    3 rows in set, 2 warnings (0.00 sec)
    ```
    
<br/><br/>

## ğŸ“ŒÂ select_type

SQLë¬¸ì„ êµ¬ì„±í•˜ëŠ” SELECT ë¬¸ì˜ ìœ í˜•ì„ ì¶œë ¥í•˜ëŠ” í•­ëª©

SELECTë¬¸ì´ ë‹¨ìˆœíˆ FROM ì ˆì— ìœ„ì¹˜í•œ ê²ƒì¸ì§€, ì„œë¸Œì¿¼ë¦¬ì¸ì§€, UNION ì ˆë¡œ ë¬¶ì¸ SELECTë¬¸ì¸ì§€ ë“±ì˜ ì •ë³´ë¥¼ ì œê³µ

<br/>

- âœ”ï¸Â **SIMPLE** : ë‹¨ìˆœí•œ SELECT êµ¬ë¬¸
    
    UNIONì´ë‚˜ ë‚´ë¶€ ì¿¼ë¦¬ê°€ ì—†ëŠ” SELECT ë¬¸ì´ë¼ëŠ” ê±¸ ì˜ë¯¸í•˜ëŠ” ìœ í˜•
    
    ë§ ê·¸ëŒ€ë¡œ ë‹¨ìˆœí•œ SELECT êµ¬ë¬¸ìœ¼ë¡œë§Œ ì‘ì„±ëœ ê²½ìš°ë¥¼ ê°€ë¦¬í‚¨ë‹¤
    
    ```sql
    mysql> EXPLAIN SELECT emp_no as ì‚¬ë²ˆ, first_name as ì´ë¦„, gender as ì„±ë³„
        -> FROM employees WHERE emp_no = 10001;
    +----+-------------+-----------+------------+-------+---------------+---------+---------+-------+------+----------+-------+
    | id | select_type | table     | partitions | type  | possible_keys | key     | key_len | ref   | rows | filtered | Extra |
    +----+-------------+-----------+------------+-------+---------------+---------+---------+-------+------+----------+-------+
    |  1 | SIMPLE      | employees | NULL       | const | PRIMARY       | PRIMARY | 4       | const |    1 |   100.00 | NULL  |
    +----+-------------+-----------+------------+-------+---------------+---------+---------+-------+------+----------+-------+
    1 row in set, 1 warning (0.00 sec)
    ```
    
- âœ”ï¸Â **PRIMARY** : ì„œë¸Œì¿¼ë¦¬ë‚˜ UNIONì´ í¬í•¨ëœ SQL ë¬¸ì—ì„œ **ì²« ë²ˆì§¸ SELECT í‚¤ì›Œë“œê°€ ì‘ì„±ëœ êµ¬ë¬¸**ì— í‘œì‹œë¨
    
    ì„œë¸Œì¿¼ë¦¬ê°€ í¬í•¨ëœ SQLë¬¸ì´ ìˆì„ ë•Œ ì²« ë²ˆì§¸ SELECT ë¬¸ì— í•´ë‹¹í•˜ëŠ” êµ¬ë¬¸ì— í‘œì‹œë˜ëŠ” ìœ í˜•
    
    ì¦‰, ì„œë¸Œì¿¼ë¦¬ë¥¼ ê°ì‹¸ëŠ” ì™¸ë¶€ ì¿¼ë¦¬ì´ê±°ë‚˜, UNIONì´ í¬í•¨ëœ SQL ë¬¸ì—ì„œ ì²« ë²ˆì§¸ë¡œ SELECT í‚¤ì›Œë“œê°€ ì‘ì„±ëœ êµ¬ë¬¸ì— í‘œì‹œë¨
    
    ```sql
    mysql> EXPLAIN SELECT e.emp_no as ì‚¬ë²ˆ, e.first_name as ì´ë¦„, e.gender as ì„±ë³„,
        -> (SELECT MAX(dept_no) as ë§¤í•‘ FROM dept_emp WHERE dept_emp.emp_no = e.emp_no)
        -> FROM employees e
        -> WHERE e.emp_no = 10001;
    +----+--------------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+------------------------------+
    | id | select_type        | table | partitions | type  | possible_keys | key     | key_len | ref   | rows | filtered | Extra                        |
    +----+--------------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+------------------------------+
    |  1 | PRIMARY            | e     | NULL       | const | PRIMARY       | PRIMARY | 4       | const |    1 |   100.00 | NULL                         |
    |  2 | DEPENDENT SUBQUERY | NULL  | NULL       | NULL  | NULL          | NULL    | NULL    | NULL  | NULL |     NULL | Select tables optimized away |
    +----+--------------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+------------------------------+
    2 rows in set, 2 warnings (0.00 sec)
    ```
    
    ### UNION
    
    ì•„ë˜ì™€ ê°™ì€ UNION ALL êµ¬ë¬¸ìœ¼ë¡œ í†µí•©ëœ SQLë¬¸ì—ì„œ ì²˜ìŒ SELECT ì¿¼ë¦¬ê°€ ë¨¼ì € ì ‘ê·¼í•œë‹¤ëŠ” ì˜ë¯¸ë¡œ PRIMARYê°€ ì¶œë ¥ëœë‹¤.
    
    ```sql
    mysql> EXPLAIN 
        -> 
        -> SELECT employee1.emp_no, employee1.first_name, employee1.last_name
        -> FROM employees employee1
        -> WHERE employee1.emp_no = 10001
        -> 
        -> UNION ALL
        -> 
        -> SELECT employee2.emp_no, employee2.first_name, employee2.last_name
        -> FROM employees employee2
        -> WHERE employee2.emp_no = 10002;
    +----+-------------+-----------+------------+-------+---------------+---------+---------+-------+------+----------+-------+
    | id | select_type | table     | partitions | type  | possible_keys | key     | key_len | ref   | rows | filtered | Extra |
    +----+-------------+-----------+------------+-------+---------------+---------+---------+-------+------+----------+-------+
    |  1 | PRIMARY     | employee1 | NULL       | const | PRIMARY       | PRIMARY | 4       | const |    1 |   100.00 | NULL  |
    |  2 | UNION       | employee2 | NULL       | const | PRIMARY       | PRIMARY | 4       | const |    1 |   100.00 | NULL  |
    +----+-------------+-----------+------------+-------+---------------+---------+---------+-------+------+----------+-------+
    2 rows in set, 1 warning (0.00 sec)
    ```
    
- âœ”ï¸Â **SUBQUERY** : ë…ë¦½ì ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ” ì„œë¸Œì¿¼ë¦¬ë¥¼ ì˜ë¯¸
    
    
    ```sql
    mysql> EXPLAIN SELECT 
        ->  (SELECT COUNT(*) FROM dept_emp) as count,
        ->  (SELECT MAX(salary) FROM salaries) as salary;
    +----+-------------+----------+------------+-------+---------------+---------+---------+------+---------+----------+----------------+
    | id | select_type | table    | partitions | type  | possible_keys | key     | key_len | ref  | rows    | filtered | Extra          |
    +----+-------------+----------+------------+-------+---------------+---------+---------+------+---------+----------+----------------+
    |  1 | PRIMARY     | NULL     | NULL       | NULL  | NULL          | NULL    | NULL    | NULL |    NULL |     NULL | No tables used |
    |  3 | SUBQUERY    | salaries | NULL       | ALL   | NULL          | NULL    | NULL    | NULL | 2838426 |   100.00 | NULL           |
    |  2 | SUBQUERY    | dept_emp | NULL       | index | NULL          | dept_no | 16      | NULL |  331143 |   100.00 | Using index    |
    +----+-------------+----------+------------+-------+---------------+---------+---------+------+---------+----------+----------------+
    3 rows in set, 1 warning (0.00 sec)
    ```
    
- âœ”ï¸Â **DERIVED** : FROM ì ˆì— ì‘ì„±ëœ ì„œë¸Œì¿¼ë¦¬
    
    ì¦‰, FROM ì ˆì˜ ë³„ë„ ì„ì‹œ í…Œì´ë¸”ì¸ ì¸ë¼ì¸ ë·°ë¥¼ ë§í•¨
    
    FROMì ˆì— ì‚¬ìš©ëœ ì„œë¸Œ ì¿¼ë¦¬ë¡œ SELECT ì¿¼ë¦¬ì˜ ê²°ê³¼ë¡œ ë©”ëª¨ë¦¬ë‚˜ ë””ìŠ¤í¬ì— ì„ì‹œ í…Œì´ë¸”ì„ ë§Œë“œëŠ” ê²½ìš°ë¥¼ ì˜ë¯¸í•œë‹¤.
    
    ```sql
    mysql> EXPLAIN
        -> SELECT emp.emp_no, sal.salary
        -> FROM employees as emp,
        ->     (SELECT MAX(salary) as salary 
        ->     FROM salaries 
        ->     WHERE emp_no BETWEEN 10001 AND 20000
        ->     ) as sal;
    +----+-------------+------------+------------+--------+---------------+---------+---------+------+--------+----------+-------------+
    | id | select_type | table      | partitions | type   | possible_keys | key     | key_len | ref  | rows   | filtered | Extra       |
    +----+-------------+------------+------------+--------+---------------+---------+---------+------+--------+----------+-------------+
    |  1 | PRIMARY     | <derived2> | NULL       | system | NULL          | NULL    | NULL    | NULL |      1 |   100.00 | NULL        |
    |  1 | PRIMARY     | emp        | NULL       | index  | NULL          | PRIMARY | 4       | NULL | 299246 |   100.00 | Using index |
    |  2 | DERIVED     | salaries   | NULL       | range  | PRIMARY       | PRIMARY | 4       | NULL | 185516 |   100.00 | Using where |
    +----+-------------+------------+------------+--------+---------------+---------+---------+------+--------+----------+-------------+
    3 rows in set, 1 warning (0.03 sec)
    ```
    
- âœ”ï¸Â **UNION** : UNION ë° UNION ALL êµ¬ë¬¸ì˜ ì²« ë²ˆì§¸ SELECT êµ¬ë¬¸ ì´í›„ì˜ SELECT êµ¬ë¬¸
    
    UNION ë° UNION ALL êµ¬ë¬¸ìœ¼ë¡œ í•©ì³ì§„ SELECT ë¬¸ì—ì„œ ì²« ë²ˆì§¸ SELECT êµ¬ë¬¸ì„ ì œì™¸í•œ ì´í›„ì˜ SELECT êµ¬ë¬¸ì— í•´ë‹¹í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸
    
    ```sql
    mysql> EXPLAIN 
        -> 
        -> SELECT employee1.emp_no, employee1.first_name, employee1.last_name
        -> FROM employees employee1
        -> WHERE employee1.emp_no = 10001
        -> 
        -> UNION ALL
        -> 
        -> SELECT employee2.emp_no, employee2.first_name, employee2.last_name
        -> FROM employees employee2
        -> WHERE employee2.emp_no = 10002;
    +----+-------------+-----------+------------+-------+---------------+---------+---------+-------+------+----------+-------+
    | id | select_type | table     | partitions | type  | possible_keys | key     | key_len | ref   | rows | filtered | Extra |
    +----+-------------+-----------+------------+-------+---------------+---------+---------+-------+------+----------+-------+
    |  1 | PRIMARY     | employee1 | NULL       | const | PRIMARY       | PRIMARY | 4       | const |    1 |   100.00 | NULL  |
    |  2 | UNION       | employee2 | NULL       | const | PRIMARY       | PRIMARY | 4       | const |    1 |   100.00 | NULL  |
    +----+-------------+-----------+------------+-------+---------------+---------+---------+-------+------+----------+-------+
    2 rows in set, 1 warning (0.00 sec)
    ```
    
- âœ”ï¸Â **UNION RESULT** : UNION ALLì´ ì•„ë‹Œ UNION êµ¬ë¬¸ìœ¼ë¡œ SELECT ì ˆì„ ê²°í•©í–ˆì„ ê²½ìš°
    
    
    ```sql
    mysql> EXPLAIN
        -> SELECT all_emp.*
        -> FROM (
        -> SELECT MAX(hire_date) FROM employees emp WHERE gender = 'M'
        -> UNION 
        -> SELECT MIN(hire_date) FROM employees emp WHERE gender = 'M'
        -> ) as all_emp;
    +----+--------------+------------+------------+------+---------------+------+---------+------+--------+----------+-----------------+
    | id | select_type  | table      | partitions | type | possible_keys | key  | key_len | ref  | rows   | filtered | Extra           |
    +----+--------------+------------+------------+------+---------------+------+---------+------+--------+----------+-----------------+
    |  1 | PRIMARY      | <derived2> | NULL       | ALL  | NULL          | NULL | NULL    | NULL |      2 |   100.00 | NULL            |
    |  2 | DERIVED      | emp        | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 299246 |    50.00 | Using where     |
    |  3 | UNION        | emp        | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 299246 |    50.00 | Using where     |
    | NULL | UNION RESULT | <union2,3> | NULL       | ALL  | NULL          | NULL | NULL    | NULL |   NULL |     NULL | Using temporary |
    +----+--------------+------------+------------+------+---------------+------+---------+------+--------+----------+-----------------+
    4 rows in set, 1 warning (0.00 sec)
    ```
    
- âœ”ï¸Â **DEPENDENT SUBQUERY** : FROMì ˆ ì´ì™¸ì˜ ì„œë¸Œì¿¼ë¦¬ê°€ ë©”ì¸ í…Œì´ë¸”ì˜ ì˜í–¥ì„ ë°›ëŠ” ê²½ìš°
    
    ì„œë¸Œì¿¼ë¦¬ê°€ ë©”ì¸ í…Œì´ë¸”ì˜ ì˜í–¥ì„ ë°›ëŠ” ê²½ìš° FROMì ˆ ì´ì™¸ì— ì‚¬ìš©ëœ **ì„œë¸Œ ì¿¼ë¦¬ê°€ ë°”ê¹¥ìª½ SELECT ì¿¼ë¦¬ì—ì„œ ì •ì˜ëœ ì»¬ëŸ¼ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°**ì— í•´ë‹¹ ì„œë¸Œ ì¿¼ë¦¬ì— í‘œê¸°ëœë‹¤.
    
    ```sql
    mysql> EXPLAIN
        -> SELECT manager.dept_no, (
        -> SELECT emp.first_name 
        ->     FROM employees emp 
        ->     WHERE gender = 'F' AND emp.emp_no = manager.emp_no
        -> ) as name
        -> FROM dept_manager as manager;
    +----+--------------------+---------+------------+--------+---------------+---------+---------+--------------------------+------+----------+-------------+
    | id | select_type        | table   | partitions | type   | possible_keys | key     | key_len | ref                      | rows | filtered | Extra       |
    +----+--------------------+---------+------------+--------+---------------+---------+---------+--------------------------+------+----------+-------------+
    |  1 | PRIMARY            | manager | NULL       | index  | NULL          | dept_no | 16      | NULL                     |   24 |   100.00 | Using index |
    |  2 | DEPENDENT SUBQUERY | emp     | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | employees.manager.emp_no |    1 |    50.00 | Using where |
    +----+--------------------+---------+------------+--------+---------------+---------+---------+--------------------------+------+----------+-------------+
    2 rows in set, 2 warnings (0.00 sec)
    ```
    
- âœ”ï¸Â **DEPENDENT UNION** : UNION ë˜ëŠ” UNION ALLì„ ì‚¬ìš©í•˜ëŠ” ì„œë¸Œì¿¼ë¦¬ê°€ ë©”ì¸ í…Œì´ë¸”ì˜ ì˜í–¥ì„ ë°›ëŠ” ê²½ìš°
    
    UNION ë˜ëŠ” UNION ALLì„ ì‚¬ìš©í•˜ëŠ” ì„œë¸Œì¿¼ë¦¬ê°€ ë©”ì¸ í…Œì´ë¸”ì˜ ì˜í–¥ì„ ë°›ëŠ” ê²½ìš°ë¡œ, UNIONìœ¼ë¡œ ì—°ê²°ëœ ë‹¨ìœ„ ì¿¼ë¦¬ë“¤ ì¤‘ì—ì„œ ì²˜ìŒìœ¼ë¡œ ì‘ì„±í•œ ë‹¨ìœ„ ì¿¼ë¦¬ì— í•´ë‹¹ë˜ëŠ” ê²½ìš°
    
    ì¦‰, UNIONìœ¼ë¡œ ì—°ê²°ë˜ëŠ” ì²« ë²ˆì§¸ ë‹¨ìœ„ ì¿¼ë¦¬ê°€ ë…ë¦½ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ì§€ ëª»í•˜ê³  ë©”ì¸ í…Œì´ë¸”ë¡œë¶€í„° ê°’ì„ í•˜ë‚˜ì”© ê³µê¸‰ë°›ëŠ” êµ¬ì¡°ì´ë¯€ë¡œ ì„±ëŠ¥ìƒ ë¶ˆë¦¬í•˜ì—¬ SQLë¬¸ì´ íŠœë‹ ëŒ€ìƒì´ ëœë‹¤
    
    UNIONì„ ì‚¬ìš©í•œ ê²½ìš° ì¤‘ì—ì„œë„ UNIONìœ¼ë¡œ ê²°í•©ëœ ì¿¼ë¦¬ê°€ ì™¸ë¶€ ì¿¼ë¦¬ì— ì˜í•´ ì˜í–¥ì„ ë°›ëŠ” ê²ƒì„ í‘œê¸°í•œë‹¤.
    
    ë‚´ë¶€ ì¿¼ë¦¬ê°€ ì™¸ë¶€ì˜ ê°’ì„ ì°¸ì¡°í•´ì„œ ì²˜ë¦¬ë  ë•Œ DEPENDENT í‚¤ì›Œë“œê°€ ì¶”ê°€ëœë‹¤.
    
    ```sql
    mysql> EXPLAIN
        -> SELECT manager.dept_no, (
        -> SELECT emp.first_name FROM employees emp WHERE gender = 'F' AND emp.emp_no = manager.emp_no
        -> UNION 
        -> SELECT emp.first_name FROM employees emp WHERE gender = 'M' AND emp.emp_no = manager.emp_no
        -> ) as name
        -> FROM dept_manager as manager;
    +----+--------------------+------------+------------+--------+---------------+---------+---------+--------------------------+------+----------+-----------------+
    | id | select_type        | table      | partitions | type   | possible_keys | key     | key_len | ref                      | rows | filtered | Extra           |
    +----+--------------------+------------+------------+--------+---------------+---------+---------+--------------------------+------+----------+-----------------+
    |  1 | PRIMARY            | manager    | NULL       | index  | NULL          | dept_no | 16      | NULL                     |   24 |   100.00 | Using index     |
    |  2 | DEPENDENT SUBQUERY | emp        | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | employees.manager.emp_no |    1 |    50.00 | Using where     |
    |  3 | DEPENDENT UNION    | emp        | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | employees.manager.emp_no |    1 |    50.00 | Using where     |
    | NULL | UNION RESULT       | <union2,3> | NULL       | ALL    | NULL          | NULL    | NULL    | NULL                     | NULL |     NULL | Using temporary |
    +----+--------------------+------------+------------+--------+---------------+---------+---------+--------------------------+------+----------+-----------------+
    4 rows in set, 3 warnings (0.00 sec)
    ```
    
- âœ”ï¸Â **UNCACHABLE SUNQUERY** : ë©”ëª¨ë¦¬ì— ìƒì£¼í•˜ì—¬ ì¬í™œìš©ë˜ì–´ì•¼ í•  ì„œë¸Œì¿¼ë¦¬ê°€ ì¬ì‚¬ìš©ë˜ì§€ ëª»í–ˆì„ ê²½ìš°
    
    1) í•´ë‹¹ ì„œë¸Œì¿¼ë¦¬ ì•ˆì— ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ë‚˜ ì‚¬ìš©ì ë³€ìˆ˜ê°€ í¬í•¨ë˜ëŠ” ê²½ìš°
    
    2) RAND(), UUID() í•¨ìˆ˜ ë“±ì„ ì‚¬ìš©í•˜ì—¬ ë§¤ë²ˆ ì¡°íšŒ ì‹œë§ˆë‹¤ ê²°ê³¼ê°€ ë‹¬ë¼ì§€ëŠ” ê²½ìš°
    
    ë©”ëª¨ë¦¬ì— ìƒì£¼í•˜ì—¬ ì¬í™œìš©ë˜ì–´ì•¼ í•  ì„œë¸Œì¿¼ë¦¬ê°€ ì¬ì‚¬ìš©ë˜ì§€ ëª»í–ˆì„ ë•Œ ì¶œë ¥ë˜ëŠ” ìœ í˜•
    
    SUBQUERY, DEPENDENT SUBQUERYëŠ” ì„œë¸Œ ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ìºì‹œí•  ìˆ˜ ìˆëŠ”ë° íŠ¹ì • ì¡°ê±´ë•Œë¬¸ì— ìºì‹œë¥¼ ì´ìš©í•  ìˆ˜ ì—†ì„ ë•Œ í‘œê¸°ëœë‹¤.
    
    ì‚¬ìš©ì ë³€ìˆ˜ê°€ ì„œë¸Œ ì¿¼ë¦¬ì— ë“¤ì–´ê°”ë‹¤ê±°ë‚˜ UUID(), RAND() ê°™ì´ ê²°ê³¼ê°’ì´ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ë³€ê²½ë˜ëŠ” í•¨ìˆ˜ê°€ ì„œë¸Œ ì¿¼ë¦¬ì— ë“¤ì–´ê°”ë‹¤ê±°ë‚˜ NOT-DETERMINISTIC ì†ì„±ì˜ ìŠ¤í† ì–´ë“œ í•¨ìˆ˜ê°€ ì„œë¸Œ ì¿¼ë¦¬ì— ë“¤ì–´ê°„ ê²½ìš°ê°€ íŠ¹ì • ì¡°ê±´ì´ë‹¤.
    
    ```sql
    mysql> EXPLAIN SELECT * FROM employees
        -> WHERE emp_no = (SELECT ROUND(RAND()*1000000));
    +----+----------------------+-----------+------------+------+---------------+------+---------+------+--------+----------+----------------+
    | id | select_type          | table     | partitions | type | possible_keys | key  | key_len | ref  | rows   | filtered | Extra          |
    +----+----------------------+-----------+------------+------+---------------+------+---------+------+--------+----------+----------------+
    |  1 | PRIMARY              | employees | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 299246 |   100.00 | Using where    |
    |  2 | UNCACHEABLE SUBQUERY | NULL      | NULL       | NULL | NULL          | NULL | NULL    | NULL |   NULL |     NULL | No tables used |
    +----+----------------------+-----------+------------+------+---------------+------+---------+------+--------+----------+----------------+
    2 rows in set, 1 warning (0.00 sec)
    ```
    
- âœ”ï¸Â **MATERIALIZED** : IN ì ˆ êµ¬ë¬¸ì— ì—°ê²°ëœ ì„œë¸Œì¿¼ë¦¬ê°€ ì„ì‹œ í…Œì´ë¸”ì„ ìƒì„±í•œ ë’¤, ì¡°ì¸ì´ë‚˜ ê°€ê³µ ì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ ì¶œë ¥ë˜ëŠ” ìœ í˜•. ì¦‰, INì ˆì˜ ì„œë¸Œì¿¼ë¦¬ë¥¼ ì„ì‹œ í…Œì´ë¸”ë¡œ ë§Œë“¤ì–´ì„œ ì¡°ì¸ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒ
    
    FROM ì ˆì´ë‚˜ IN (subquery) í˜•íƒœì˜ ì¿¼ë¦¬ì— ì‚¬ìš©ëœ ì„œë¸Œ ì¿¼ë¦¬ë¥¼ ìµœì í™”í•  ë•Œ ì‚¬ìš©ëœë‹¤. 
    
    ì´ ê²½ìš°ì— ë³´í†µ ì„œë¸Œ ì¿¼ë¦¬ë³´ë‹¤ ì™¸ë¶€ ì¿¼ë¦¬ì˜ í…Œì´ë¸”ì„ ë¨¼ì € ì½ì–´ì„œ ë¹„íš¨ìœ¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ê¸° ë§ˆë ¨ì¸ë° ì´ë ‡ê²Œ ì‹¤í–‰í•˜ì§€ ì•Šê³  ì„œë¸Œ ì¿¼ë¦¬ì˜ ë‚´ìš©ì„ ì„ì‹œí…Œì´ë¸”ë¡œ êµ¬ì²´í™”í•œ í›„ ì™¸ë¶€ í…Œì´ë¸”ê³¼ ì¡°ì¸í•˜ëŠ” í˜•íƒœë¡œ ìµœì í™”ëœë‹¤. ì´ ë•Œ, ì„œë¸Œ ì¿¼ë¦¬ê°€ ë¨¼ì € êµ¬ì²´í™”ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ í‘œê¸°í•  ë•Œ ì‚¬ìš©ëœë‹¤.
    
    ë­”ê°€ íš¨ìœ¨ì ìœ¼ë¡œ ê°œì„ ëœ ë“¯í•˜ì§€ë§Œ ê²°êµ­ ì„ì‹œí…Œì´ë¸”ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ì—„ì²­ íš¨ìœ¨ì ì´ì§€ëŠ” ì•Šë‹¤.
    
    ```sql
    mysql> EXPLAIN SELECT * FROM employees
        -> WHERE emp_no IN (SELECT emp_no FROM salaries WHERE from_date > '2020-01-01' AND salary > 200000);
    +----+--------------+-------------+------------+--------+---------------+------------+---------+----------------------------+---------+----------+-------------+
    | id | select_type  | table       | partitions | type   | possible_keys | key        | key_len | ref                        | rows    | filtered | Extra       |
    +----+--------------+-------------+------------+--------+---------------+------------+---------+----------------------------+---------+----------+-------------+
    |  1 | SIMPLE       | employees   | NULL       | ALL    | PRIMARY       | NULL       | NULL    | NULL                       |  299246 |   100.00 | Using where |
    |  1 | SIMPLE       | <subquery2> | NULL       | eq_ref | <auto_key>    | <auto_key> | 4       | employees.employees.emp_no |       1 |   100.00 | NULL        |
    |  2 | MATERIALIZED | salaries    | NULL       | ALL    | PRIMARY       | NULL       | NULL    | NULL                       | 2838426 |    11.11 | Using where |
    +----+--------------+-------------+------------+--------+---------------+------------+---------+----------------------------+---------+----------+-------------+
    3 rows in set, 1 warning (0.00 sec)
    ```
    
<br/><br/>

## ğŸ“ŒÂ  table

í…Œì´ë¸”ëª…ì„ í‘œì‹œí•˜ëŠ” í•­ëª©

ì‹¤í–‰ ê³„íš ì •ë³´ì—ì„œ í…Œì´ë¸”ëª…ì´ë‚˜ í…Œì´ë¸” ëª…ì¹­ì„ ì¶œë ¥í•˜ë©°, ì„œë¸Œì¿¼ë¦¬ë‚˜ ì„ì‹œ í…Œì´ë¸”ì„ ë§Œë“¤ì–´ì„œ ë³„ë„ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ë•ŒëŠ” `<subquery#>` ë‚˜ `<derived#>`ë¼ê³  ì¶œë ¥ëœë‹¤.

- **CODE**
    
    ```sql
    mysql> EXPLAIN
        -> SELECT emp.emp_no, sal.salary
        -> FROM employees as emp,
        ->     (SELECT MAX(salary) as salary 
        ->     FROM salaries 
        ->     WHERE emp_no BETWEEN 10001 AND 20000
        ->     ) as sal;
    +----+-------------+------------+------------+--------+---------------+---------+---------+------+--------+----------+-------------+
    | id | select_type | table      | partitions | type   | possible_keys | key     | key_len | ref  | rows   | filtered | Extra       |
    +----+-------------+------------+------------+--------+---------------+---------+---------+------+--------+----------+-------------+
    |  1 | PRIMARY     | <derived2> | NULL       | system | NULL          | NULL    | NULL    | NULL |      1 |   100.00 | NULL        |
    |  1 | PRIMARY     | emp        | NULL       | index  | NULL          | PRIMARY | 4       | NULL | 299246 |   100.00 | Using index |
    |  2 | DERIVED     | salaries   | NULL       | range  | PRIMARY       | PRIMARY | 4       | NULL | 185516 |   100.00 | Using where |
    +----+-------------+------------+------------+--------+---------------+---------+---------+------+--------+----------+-------------+
    3 rows in set, 1 warning (0.03 sec)
    ```
    
<br/><br/>

## ğŸ“ŒÂ Â partitions

ì‹¤í–‰ ê³„íšì˜ ë¶€ê°€ ì •ë³´ë¡œ, ë°ì´í„°ê°€ ì €ì¥ëœ ë…¼ë¦¬ì ì¸ ì˜ì—­ì„ í‘œì‹œí•˜ëŠ” í•­ëª©

ì‚¬ì „ì— ì •ì˜í•œ ì „ì²´ íŒŒí‹°ì…˜ ì¤‘ íŠ¹ì • íŒŒí‹°ì…˜ì— ì„ íƒì ìœ¼ë¡œ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ SQL ì„±ëŠ¥ ì¸¡ë©´ì—ì„œ ìœ ë¦¬í•©ë‹ˆë‹¤.

ë„ˆë¬´ ë§ì€ ì˜ì—­ì˜ íŒŒí‹°ì…˜ì— ì ‘ê·¼í•˜ëŠ” ê²ƒìœ¼ë¡œ ì¶œë ¥ëœë‹¤ë©´ íŒŒí‹°ì…˜ ì •ì˜ë¥¼ íŠœë‹í•´ë´ì•¼ í•œë‹¤

<br/><br/>

## ğŸ“ŒÂ type

í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ì°¾ì„ì§€ì— ê´€í•œ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” í•­ëª©

í…Œì´ë¸”ì„ ì²˜ìŒë¶€í„° ëê¹Œì§€ ì „ë¶€ í™•ì¸í• ì§€ ì•„ë‹ˆë©´ ì¸ë±ìŠ¤ë¥¼ í†µí•´ ë°”ë¡œ ë°ì´í„°ë¥¼ ì°¾ì•„ê°ˆì§€ ë“±ì„ í•´ì„í•  ìˆ˜ ìˆë‹¤.

âœ”ï¸Â **system** : í…Œì´ë¸”ì— **ë°ì´í„°ê°€ ì—†ê±°ë‚˜ í•œ ê°œë§Œ ìˆëŠ” ê²½ìš°**. ì„±ëŠ¥ìƒ ìµœìƒì˜ type

- âœ”ï¸Â **const** : ì¡°íšŒë˜ëŠ” ë°ì´í„°ê°€ **ë‹¨ 1ê±´**ì¼ ë•Œ ì¶œë ¥ë˜ëŠ” ìœ í˜•. ì„±ëŠ¥ìƒ ìœ ë¦¬í•œ ë°©ì‹
    
    ê³ ìœ  ì¸ë±ìŠ¤ë‚˜ ê¸°ë³¸ í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¨ 1ê±´ì˜ ë°ì´í„°ì—ë§Œ ì ‘ê·¼í•˜ë©´ ë˜ë¯€ë¡œ ì†ë„ë‚˜ ë¦¬ì†ŒìŠ¤ ì¸¡ë©´ì—ì„œ ì§€í–¥í•´ì•¼ í•  íƒ€ì…
    
- âœ”ï¸Â **eq_ref** : ì¡°ì¸ì´ ìˆ˜í–‰ë  ë•Œ ë“œë¦¬ë¸ í…Œì´ë¸”ì˜ ë°ì´í„°ì— ì ‘ê·¼í•˜ë©°, **ê³ ìœ  ì¸ë±ìŠ¤** ë˜ëŠ” **ê¸°ë³¸ í‚¤**ë¡œ ë‹¨ **1ê±´ì˜ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ë°©ì‹**
    
    ë“œë¼ì´ë¹™ í…Œì´ë¸”ê³¼ì˜ ì¡°ì¸ í‚¤ê°€ ë“œë¦¬ë¸ í…Œì´ë¸”ì— ìœ ì¼í•˜ë¯€ë¡œ **ì¡°ì¸ì´ ìˆ˜í–‰ë  ë•Œ ì„±ëŠ¥ìƒ ê°€ì¥ ìœ ë¦¬í•œ ê²½ìš°**
    
    ```sql
    mysql> EXPLAIN 
        -> SELECT dept_emp.emp_no, dept.dept_no, dept.dept_name
        -> FROM dept_emp, 
        ->  departments as dept
        -> WHERE dept_emp.dept_no = dept.dept_no
        -> AND dept_emp.emp_no BETWEEN 10001 AND 10010;
    +----+-------------+----------+------------+--------+-----------------+---------+---------+----------------------------+------+----------+--------------------------+
    | id | select_type | table    | partitions | type   | possible_keys   | key     | key_len | ref                        | rows | filtered | Extra                    |
    +----+-------------+----------+------------+--------+-----------------+---------+---------+----------------------------+------+----------+--------------------------+
    |  1 | SIMPLE      | dept_emp | NULL       | range  | PRIMARY,dept_no | PRIMARY | 4       | NULL                       |   11 |   100.00 | Using where; Using index |
    |  1 | SIMPLE      | dept     | NULL       | eq_ref | PRIMARY         | PRIMARY | 16      | employees.dept_emp.dept_no |    **1** |   100.00 | NULL                     |
    +----+-------------+----------+------------+--------+-----------------+---------+---------+----------------------------+------+----------+--------------------------+
    2 rows in set, 1 warning (0.01 sec)
    ```
    
    â†’ rows ê°€ 1ì¸ ê²ƒì„ í™•ì¸
    
- âœ”ï¸Â **ref** : ì¡°ì¸ì´ ìˆ˜í–‰ë  ë•Œ ë“œë¦¬ë¸ í…Œì´ë¸”ì˜ ë°ì´í„°ì— ì ‘ê·¼í•˜ë©°, **ê³ ìœ  ì¸ë±ìŠ¤** ë˜ëŠ” **ê¸°ë³¸ í‚¤**ë¡œ **2ê°œ ì´ìƒì˜ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ë°©ì‹**.
    
    ì•ì—ì„œ  ì„¤ëª…í•œ eq_ref ìœ í˜•ê³¼ ìœ ì‚¬í•œ ë°©ì‹ìœ¼ë¡œ, ì¡°ì¸ì„ ìˆ˜í–‰í•  ë•Œ **ë“œë¦¬ë¸ í…Œì´ë¸”ì˜ ë°ì´í„° ì ‘ê·¼ ë²”ìœ„ê°€ 2ê°œ ì´ìƒ**ì¼ ê²½ìš°
    
    ```sql
    mysql> EXPLAIN 
        -> SELECT emp.emp_no, sal.salary
        -> FROM employees as emp,
        ->  salaries as sal
        -> WHERE emp.emp_no = sal.emp_no;
    +----+-------------+-------+------------+-------+---------------+---------+---------+----------------------+--------+----------+-------------+
    | id | select_type | table | partitions | type  | possible_keys | key     | key_len | ref                  | rows   | filtered | Extra       |
    +----+-------------+-------+------------+-------+---------------+---------+---------+----------------------+--------+----------+-------------+
    |  1 | SIMPLE      | emp   | NULL       | index | PRIMARY       | PRIMARY | 4       | NULL                 | 299246 |   100.00 | Using index |
    |  1 | SIMPLE      | sal   | NULL       | ref   | PRIMARY       | PRIMARY | 4       | employees.emp.emp_no |      9 |   100.00 | NULL        |
    +----+-------------+-------+------------+-------+---------------+---------+---------+----------------------+--------+----------+-------------+
    2 rows in set, 1 warning (0.00 sec)
    ```
    
- âœ”ï¸Â **ref_or_null** : ref ìœ í˜•ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ IS NULL êµ¬ë¬¸ì— ëŒ€í•´ ì¸ë±ìŠ¤ë¥¼ í™œìš©í•˜ë„ë¡ ìµœì í™”ëœ ë°©ì‹
    
    MySQLê³¼ MariaDBëŠ” NULLì— ëŒ€í•´ ì¸ë±ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ê²€ìƒ‰í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë•Œ NULLì€ ê°€ì¥ ì•ìª½ì— ì •ë ¬ëœë‹¤
    
    í…Œì´ë¸” ê²€ìƒ‰ ì‹œ NULL ë°ì´í„°ì–‘ì´ ì ë‹¤ë©´ íš¨ìœ¨ì , í•˜ì§€ë§Œ ë§ë‹¤ë©´ SQL íŠœë‹ì˜ ëŒ€ìƒ
    
- âœ”ï¸Â range : í…Œì´ë¸” ë‚´ì˜ ì—°ì†ëœ ë°ì´í„° ë²”ìœ„ë¥¼ ì¡°íšŒí•˜ëŠ” ìœ í˜• =, <>, >, >=, <=, IS NULL, <=>, BETWEEN ë˜ëŠ” IN ì—°ì‚°ì„ í†µí•´ ë²”ìœ„ ìŠ¤ìº”ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹
    
    ì£¼ì–´ì§„ ë°ì´í„° ë²”ìœ„ ë‚´ì—ì„œ í–‰ ë‹¨ìœ„ë¡œ ìŠ¤ìº”í•˜ì§€ë§Œ, ìŠ¤ìº”í•  ë²”ìœ„ê°€ ë„“ìœ¼ë©´ ì„±ëŠ¥ ì €í•˜ì˜ ìš”ì¸ì´ ë  ìˆ˜ ìˆìŒ
    
- âœ”ï¸Â fulltext
- âœ”ï¸Â index_merge
- âœ”ï¸Â index
- âœ”ï¸Â ALL

<br/><br/>

## ğŸ“ŒÂ possible_keys

ì˜µí‹°ë§ˆì´ì €ê°€ SQLë¬¸ì„ ìµœì í™”í•˜ê³ ì ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¸ë±ìŠ¤ ëª©ë¡ì„ ì¶œë ¥

ë‹¤ë§Œ ì‹¤ì œ ì‚¬ìš©í•œ ì¸ë±ìŠ¤ê°€ ì•„ë‹Œ, ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í›„ë³´êµ°ì˜ ê¸°ë³¸ í‚¤ì™€ ì¸ë±ìŠ¤ ëª©ë¡ë§Œ ë³´ì—¬ì£¼ë¯€ë¡œ SQL íŠœë‹ì˜ íš¨ìš©ì„±ì„ ì—†ë‹¤.

<br/><br/>

## ğŸ“ŒÂ key

ì˜µí‹°ë§ˆì´ì €ê°€ SQLë¬¸ì„ ìµœì í™”í•˜ê³ ì ì‚¬ìš©í•œ ê¸°ë³¸ í‚¤ (PK) ë˜ëŠ” ì¸ë±ìŠ¤ëª…ì„ ì˜ë¯¸

ì–´ëŠ ì¸ë±ìŠ¤ë¡œ ë°ì´í„°ë¥¼ ê²€ìƒ‰í–ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë¹„íš¨ìœ¨ì ì¸ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í–ˆê±°ë‚˜ ì¸ë±ìŠ¤ ìì²´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë‹¤ë©´ SQL íŠœë‹ì˜ ëŒ€ìƒ

- CODE
    
    ```sql
    mysql> EXPLAIN 
        -> SELECT emp_no
        -> FROM titles
        -> WHERE title = "Engineer";
    +----+-------------+--------+------------+-------+---------------+---------+---------+------+--------+----------+--------------------------+
    | id | select_type | table  | partitions | type  | possible_keys | key     | key_len | ref  | rows   | filtered | Extra                    |
    +----+-------------+--------+------------+-------+---------------+---------+---------+------+--------+----------+--------------------------+
    |  1 | SIMPLE      | titles | NULL       | index | **PRIMARY**       | PRIMARY | 209     | NULL | 442486 |    10.00 | Using where; Using index |
    +----+-------------+--------+------------+-------+---------------+---------+---------+------+--------+----------+--------------------------+
    1 row in set, 1 warning (0.01 sec)
    
    mysql> EXPLAIN SELECT emp_no FROM employees   WHERE first_name = 'Parto';
    +----+-------------+-----------+------------+------+----------------+----------------+---------+-------+------+----------+-------------+
    | id | select_type | table     | partitions | type | possible_keys  | key            | key_len | ref   | rows | filtered | Extra       |
    +----+-------------+-----------+------------+------+----------------+----------------+---------+-------+------+----------+-------------+
    |  1 | SIMPLE      | employees | NULL       | ref  | **IDX_first_name** | IDX_first_name | 58      | const |  228 |   100.00 | Using index |
    +----+-------------+-----------+------------+------+----------------+----------------+---------+-------+------+----------+-------------+
    1 row in set, 1 warning (0.00 sec)
    ```
    

## ğŸ“ŒÂ key_len

ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ì¸ë±ìŠ¤ ì „ì²´ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ì¼ë¶€ ì¸ë±ìŠ¤ë§Œ ì‚¬ìš©í•œë‹¤.

key_lenì€ ì´ë ‡ê²Œ ì‚¬ìš©í•œ ì¸ë±ìŠ¤ì˜ ë°”ì´íŠ¸bytes ìˆ˜ë¥¼ ì˜ë¯¸í•œë‹¤.

UTF-8 ìºë¦­í„°ì…‹ ê¸°ì¤€ìœ¼ë¡œ INT ë°ì´í„° ìœ í˜•ì€ ë‹¨ìœ„ë‹¹ 4ë°”ì´íŠ¸, VARCHAR ë°ì´í„° ìœ í˜•ì€ ë‹¨ìœ„ë‹¹ 3ë°”ì´íŠ¸ì„ì„ ì¸ì§€í•˜ê³  key_lenì„ ì´í•´í•´ë³´ì.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-04-16 á„‹á…©á„’á…® 4.45.54.png](Execute%20Pl%207ad72/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-04-16_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.45.54.png)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-04-16 á„‹á…©á„’á…® 4.59.28.png](Execute%20Pl%207ad72/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-04-16_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.59.28.png)

## ğŸ“ŒÂ ref

referenceì˜ ì•½ìë¡œ, í…Œì´ë¸” ì¡°ì¸ì„ ìˆ˜í–‰í•  ë•Œ ì–´ë–¤ ì¡°ê±´ìœ¼ë¡œ í•´ë‹¹ í…Œì´ë¸”ì— ì—‘ì„¸ìŠ¤ë˜ì—ˆëŠ”ì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” ì •ë³´

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-04-16 á„‹á…©á„’á…® 5.11.17.png](Execute%20Pl%207ad72/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-04-16_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.11.17.png)

- CODE
    
    ```sql
    mysql> EXPLAIN SELECT employees.emp_no, titles.title FROM employees, titles WHERE employees.emp_no=titles.emp_no AND employees.emp_no BETWEEN 10000 AND 10002;
    +----+-------------+-----------+------------+--------+---------------+---------+---------+-------------------------+------+----------+--------------------------+
    | id | select_type | table     | partitions | type   | possible_keys | key     | key_len | ref                     | rows | filtered | Extra                    |
    +----+-------------+-----------+------------+--------+---------------+---------+---------+-------------------------+------+----------+--------------------------+
    |  1 | SIMPLE      | titles    | NULL       | range  | PRIMARY       | PRIMARY | 4       | NULL                    |    2 |   100.00 | Using where; Using index |
    |  1 | SIMPLE      | employees | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | employees.titles.emp_no |    1 |   100.00 | Using index              |
    +----+-------------+-----------+------------+--------+---------------+---------+---------+-------------------------+------+----------+--------------------------+
    2 rows in set, 1 warning (0.00 sec)
    ```
    

## ğŸ“ŒÂ rows

SQL ë¬¸ì„ ìˆ˜í–‰í•˜ê³ ì ì ‘ê·¼í•˜ëŠ” ë°ì´í„°ì˜ ëª¨ë“  í–‰row ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì˜ˆì¸¡ í•­ëª©. ì¦‰, ë””ìŠ¤í¬ì—ì„œ ë°ì´í„° íŒŒì¼ì„ ì½ê³  ë©”ëª¨ë¦¬ì—ì„œ ì²˜ë¦¬í•´ì•¼ í•  í–‰ ìˆ˜ë¥¼ ì˜ˆìƒí•˜ëŠ” ê°’ì´ê³ , ìˆ˜ì‹œë¡œ ë³€ë™ë˜ëŠ” MySQLì˜ í†µê³„ì •ë³´ë¥¼ ì°¸ê³ í•˜ì—¬ ì‚°ì¶œí•˜ëŠ” ê°’ì´ë¯€ë¡œ ìˆ˜ì¹˜ê°€ ì •í™•í•˜ì§„ ì•ŠìŒ ê·¸ë¦¬ê³  ìµœì¢… ì¶œë ¥ë  í–‰ ìˆ˜ê°€ ì•„ë‹ˆë¼ëŠ” ì ì— ìœ ì˜í•´ì•¼í•œë‹¤.

SQLë¬¸ì˜ ìµœì¢… ê²°ê³¼ ê±´ìˆ˜ì™€ ë¹„êµí•´ rowsìˆ˜ê°€ í¬ê²Œ ì°¨ì´ ë‚  ë•ŒëŠ” ë¶ˆí•„ìš”í•˜ê²Œ MySQL ì—”ì§„ê¹Œì§€ ë°ì´í„°ë¥¼ ë§ì´ ê°€ì ¸ì™”ë‹¤ëŠ” ëœ»ì´ë¯€ë¡œ SQL íŠœë‹ì˜ ëŒ€ìƒì´ ë  ìˆ˜ ìˆë‹¤.

## ğŸ“ŒÂ filterd

SQLë¬¸ì„ í†µí•´ DBì—”ì§„ìœ¼ë¡œ ê°€ì ¸ì˜¨ ë°ì´í„° ëŒ€ìƒìœ¼ë¡œ í•„í„° ì¡°ê±´ì— ë”°ë¼ ì–´ëŠ ì •ë„ì˜ ë¹„ìœ¨ë¡œ ë°ì´í„°ë¥¼ ì œê±°í–ˆëŠ”ì§€ë¥¼ ì˜ë¯¸í•˜ëŠ” í•­ëª©. 

ì˜ˆë¥¼ ë“¤ì–´ DB ì—”ì§„ìœ¼ë¡œ 100ê±´ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì™”ë‹¤ê³  ê°€ì •í•œë‹¤ë©´, ì´í›„ WHERE ì ˆì˜ **emp_no BETWEEN 1 AND 10** ì¡°ê±´ìœ¼ë¡œ 100ê±´ì˜ ë°ì´í„°ê°€ 10ê±´ë¡œ í•„í„°ë§ëœë‹¤. 

ì´ì²˜ëŸ¼ 100ê±´ì—ì„œ 10ê±´ìœ¼ë¡œ í•„í„°ë§ë˜ì—ˆìœ¼ë¯€ë¡œ filteredì—ëŠ” 10(%)ì´ë¼ëŠ” ì •ë³´ê°€ ì¶œë ¥ëœë‹¤.

## ğŸ“ŒÂ extra

SQLë¬¸ì„ ì–´ë–»ê²Œ ìˆ˜í–‰í•  ê²ƒì¸ì§€ì— ê´€í•œ ì¶”ê°€ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ëŠ” í•­ëª©

ë¶€ê°€ì ì¸ ì •ë³´ë“¤ì€ ì„¸ë¯¸ì½œë¡ (;)ìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ ì—¬ëŸ¬ê°€ì§€ ì •ë³´ë¥¼ ë‚˜ì—´í•  ìˆ˜ ìˆìœ¼ë©° 30ì—¬ê°€ì§€ í•­ëª©ìœ¼ë¡œ ì •ë¦¬í•  ìˆ˜ ìˆë‹¤.

Using index â†â†’ Using filesort, Using temporary

## í™•ì¥ëœ ì‹¤í–‰ ê³„íš

### EXPLAIN FORMAT = TRADITIONAL

default í¬ë§·

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-04-16 á„‹á…©á„’á…® 5.32.40.png](Execute%20Pl%207ad72/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-04-16_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.32.40.png)

- CODE
    
    ```sql
    mysql> EXPLAIN FORMAT=TRADITIONAL
        -> SELECT *
        -> FROM employees
        -> WHERE emp_no BETWEEN 100000 AND 200000;
    +----+-------------+-----------+------------+-------+---------------+---------+---------+------+-------+----------+-------------+
    | id | select_type | table     | partitions | type  | possible_keys | key     | key_len | ref  | rows  | filtered | Extra       |
    +----+-------------+-----------+------------+-------+---------------+---------+---------+------+-------+----------+-------------+
    |  1 | SIMPLE      | employees | NULL       | range | PRIMARY       | PRIMARY | 4       | NULL | 20086 |   100.00 | Using where |
    +----+-------------+-----------+------------+-------+---------------+---------+---------+------+-------+----------+-------------+
    1 row in set, 1 warning (0.01 sec)
    ```
    

### EXPLAIN FORMAT = TREE

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-04-16 á„‹á…©á„’á…® 5.34.16.png](Execute%20Pl%207ad72/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-04-16_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.34.16.png)

- CODE
    
    ```sql
    mysql> EXPLAIN FORMAT=TREE SELECT * FROM employees WHERE emp_no BETWEEN 100000 AND 200000;
    +-------------------------------------------------------------------------------------------------------------+
    | EXPLAIN                                                                                                     |
    +-------------------------------------------------------------------------------------------------------------+
    | -> Filter: (employees.emp_no between 100000 and 200000)
        -> Index range scan on employees using PRIMARY
     |
    +-------------------------------------------------------------------------------------------------------------+
    1 row in set (0.00 sec)
    ```
    

### EXPLAIN FORMAT = JSON

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-04-16 á„‹á…©á„’á…® 5.36.03.png](Execute%20Pl%207ad72/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-04-16_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.36.03.png)

- CODE
    
    ```sql
    mysql> EXPLAIN FORMAT=JSON SELECT * FROM employees WHERE emp_no BETWEEN 100000 AND 200000;
    +---------------------------------------------------------------------------------------------------------------
    | EXPLAIN
    ----------------------------------------------------------------------------+
    | {
      "query_block": {
        "select_id": 1,
        "cost_info": {
          "query_cost": "4022.44"
        },
        "table": {
          "table_name": "employees",
          "access_type": "range",
          "possible_keys": [
            "PRIMARY"
          ],
          "key": "PRIMARY",
          "used_key_parts": [
            "emp_no"
          ],
          "key_length": "4",
          "rows_examined_per_scan": 20086,
          "rows_produced_per_join": 20086,
          "filtered": "100.00",
          "cost_info": {
            "read_cost": "2013.84",
            "eval_cost": "2008.60",
            "prefix_cost": "4022.44",
            "data_read_per_join": "2M"
          },
          "used_columns": [
            "emp_no",
            "birth_date",
            "first_name",
            "last_name",
            "gender",
            "hire_date"
          ],
          "attached_condition": "(`employees`.`employees`.`emp_no` between 100000 and 200000)"
        }
      }
    } |
    +--------------------------------------------------------------------------------------------
    ```
    

### EXPLAIN FORMAT = ANALYZE